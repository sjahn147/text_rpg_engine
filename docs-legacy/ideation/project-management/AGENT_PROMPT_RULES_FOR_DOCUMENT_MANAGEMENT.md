# 에이전트 프롬프트 규칙: 문서 관리 자동화

**작성일**: 2026-01-01  
**목적**: 기술적 시스템 없이 프롬프트 규칙만으로 문서 관리 자동화 달성  
**핵심 철학**: 규칙 준수 → 자동화

---

## 📋 목차

1. [문제 정의](#문제-정의)
2. [원하는 결과](#원하는-결과)
3. [프롬프트 규칙](#프롬프트-규칙)
4. [규칙 적용 예시](#규칙-적용-예시)
5. [검증 방법](#검증-방법)

---

## 문제 정의

### 현재 상황

1. **기존 문서들**:
   - `docs/ideation/` 폴더에 이미 많은 문서 존재
   - 다양한 형식, 다양한 메타데이터
   - 일부는 구현 완료 (deprecated 되어야 함)
   - 일부는 아직 ideation 단계
   - 일부는 epic/task로 전환 필요

2. **문제점**:
   - ❌ 문서 간 연결고리 없음
   - ❌ 상태가 명확하지 않음
   - ❌ deprecated 처리가 수동
   - ❌ 시스템이 문서를 인식하지 못함
   - ❌ 대시보드에 표시되지 않음

3. **근본 원인**:
   - 문서 작성 시 일관된 규칙이 없음
   - 메타데이터가 없거나 불완전함
   - 상태 전환 시 문서 업데이트가 수동

---

## 원하는 결과

### 달성해야 할 목표

1. **모든 ideation 문서가 시스템에 등록됨**
   - 기존 문서도 포함
   - 새로 작성되는 문서도 포함

2. **상태가 명확함**
   - 각 문서의 현재 상태: `ideation` | `epic` | `task` | `done` | `deprecated`
   - 상태 전환 이력 추적 가능

3. **문서 간 연결고리가 자동 설정됨**
   - ideation → epic → task 연결
   - 의존성 관계 명확

4. **deprecated 문서 자동 처리**
   - 구현 완료된 문서는 자동으로 deprecated
   - 아카이브로 이동

5. **대시보드에서 모든 문서 확인 가능**
   - 상태별 필터링
   - 연결 관계 시각화

---

## 프롬프트 규칙

### 규칙 1: 문서 작성 시 필수 메타데이터

**에이전트는 문서를 작성할 때 반드시 다음 형식을 준수해야 함:**

```markdown
# {제목}

**상태**: ideation|epic|task|done|deprecated
**카테고리**: {category}
**우선순위**: high|medium|low
**생성일**: {YYYY-MM-DD}
**최종 수정**: {YYYY-MM-DD}

<!-- 연결 정보 (있는 경우) -->
**관련 Epic**: {EPIC_ID 또는 null}
**관련 Ideation**: {ideation_id 또는 null}
**상위 Task**: {TASK_ID 또는 null}

## 설명
{내용}

## 구현 상태
- [ ] 구현 전
- [x] 구현 완료
- [ ] 부분 구현
- [ ] Deprecated

## 관련 문서
- [{관련 문서 제목}]({상대 경로})
```

**규칙**:
- ✅ **반드시** 메타데이터 섹션 포함
- ✅ **반드시** 상태 명시
- ✅ **반드시** 카테고리 명시
- ✅ 연결 정보가 있으면 **반드시** 명시
- ❌ 메타데이터 없이 문서 작성 금지

---

### 규칙 2: 상태 전환 시 문서 업데이트

**에이전트는 상태를 변경할 때 반드시 다음을 수행해야 함:**

#### 2.1 ideation → epic 전환

**에이전트가 해야 할 일**:
1. Epic 문서 생성 (`docs/project-management/epics/EPIC-{번호}.md`)
2. Epic 문서에 `ideation_id` 명시
3. **원본 ideation 문서 업데이트**:
   - `**상태**: epic` 변경
   - `**관련 Epic**: EPIC-{번호}` 추가
   - `**최종 수정**: {오늘 날짜}` 업데이트

**프롬프트 규칙**:
```
상태를 ideation에서 epic으로 전환할 때:
1. Epic 문서를 생성한다
2. Epic 문서에 ideation_id를 명시한다
3. 반드시 원본 ideation 문서를 업데이트한다:
   - 상태를 epic으로 변경
   - 관련 Epic ID 추가
   - 최종 수정일 업데이트
4. 두 문서 모두 저장한다
```

#### 2.2 epic → task 전환

**에이전트가 해야 할 일**:
1. Task 문서 생성 (`docs/project-management/tasks/TASK-{번호}.md`)
2. Task 문서에 `epic_id` 명시
3. **원본 epic 문서 업데이트**:
   - `**상태**: task` 변경 (해당 Task로)
   - `**관련 Task**: TASK-{번호}` 추가
   - `**최종 수정**: {오늘 날짜}` 업데이트

**프롬프트 규칙**:
```
상태를 epic에서 task로 전환할 때:
1. Task 문서를 생성한다
2. Task 문서에 epic_id를 명시한다
3. 반드시 원본 epic 문서를 업데이트한다:
   - 관련 Task ID 추가
   - 최종 수정일 업데이트
4. 두 문서 모두 저장한다
```

#### 2.3 done → deprecated 전환

**에이전트가 해야 할 일**:
1. 문서 내용 확인 (구현 완료 여부)
2. `**상태**: deprecated` 변경
3. `**Deprecated 사유**: {사유}` 추가
4. 파일명에 `[deprecated]` 접두어 추가
5. `docs/archive/deprecated/ideation/`으로 이동

**프롬프트 규칙**:
```
구현이 완료되어 문서를 deprecated 처리할 때:
1. 문서 상태를 deprecated로 변경한다
2. Deprecated 사유를 명시한다
3. 파일명에 [deprecated] 접두어를 추가한다
4. docs/archive/deprecated/ideation/ 폴더로 이동한다
5. 원본 위치의 문서는 삭제한다
```

---

### 규칙 3: 문서 간 연결고리 설정

**에이전트는 문서를 참조할 때 반드시 양방향 연결을 설정해야 함:**

#### 3.1 Epic 생성 시

**에이전트가 해야 할 일**:
1. Epic 문서 작성
2. Epic 문서에 `**관련 Ideation**: ideation-{id}` 명시
3. **원본 ideation 문서 찾아서 업데이트**:
   - `**관련 Epic**: EPIC-{번호}` 추가
   - `**최종 수정**: {오늘 날짜}` 업데이트

**프롬프트 규칙**:
```
Epic을 생성할 때:
1. Epic 문서에 ideation_id를 명시한다
2. 반드시 원본 ideation 문서를 찾아서 업데이트한다:
   - 관련 Epic ID 추가
   - 최종 수정일 업데이트
3. 한쪽만 연결하는 것은 금지한다
```

#### 3.2 Task 생성 시

**에이전트가 해야 할 일**:
1. Task 문서 작성
2. Task 문서에 `**상위 Epic**: EPIC-{번호}` 명시
3. **원본 epic 문서 찾아서 업데이트**:
   - `**관련 Task**: TASK-{번호}` 추가
   - `**최종 수정**: {오늘 날짜}` 업데이트

**프롬프트 규칙**:
```
Task를 생성할 때:
1. Task 문서에 epic_id를 명시한다
2. 반드시 원본 epic 문서를 찾아서 업데이트한다:
   - 관련 Task ID 추가
   - 최종 수정일 업데이트
3. 한쪽만 연결하는 것은 금지한다
```

---

### 규칙 4: 기존 문서 마이그레이션

**에이전트는 기존 문서를 처리할 때 다음 규칙을 준수해야 함:**

#### 4.1 기존 문서 발견 시

**에이전트가 해야 할 일**:
1. 문서 읽기
2. 메타데이터 섹션이 있는지 확인
3. 없으면 **반드시 추가**:
   - 상태 추론 (내용 분석)
   - 카테고리 추론 (폴더 구조)
   - 우선순위 추론 (내용 분석)
4. 문서 업데이트

**프롬프트 규칙**:
```
기존 문서를 처리할 때:
1. 문서를 읽는다
2. 메타데이터 섹션이 있는지 확인한다
3. 없으면 반드시 추가한다:
   - 상태: 문서 내용 분석하여 추론
   - 카테고리: 폴더 구조에서 추론
   - 우선순위: 내용 분석하여 추론
4. 문서를 업데이트한다
```

#### 4.2 구현 완료 문서 감지

**에이전트가 해야 할 일**:
1. 문서 내용 분석
2. "구현 완료", "완성", "완료" 등의 키워드 확인
3. 실제 코드 확인 (가능한 경우)
4. 완료 확인되면 deprecated 처리

**프롬프트 규칙**:
```
문서를 읽을 때:
1. "구현 완료", "완성", "완료" 등의 키워드를 확인한다
2. 실제 코드베이스에서 구현 여부를 확인한다
3. 완료 확인되면:
   - 상태를 done으로 변경
   - 또는 deprecated 처리
4. 문서를 업데이트한다
```

---

### 규칙 5: 문서 검색 및 참조

**에이전트는 문서를 참조할 때 다음 규칙을 준수해야 함:**

#### 5.1 관련 문서 찾기

**에이전트가 해야 할 일**:
1. `docs/ideation/` 폴더 스캔
2. 제목이나 내용으로 관련 문서 찾기
3. 찾은 문서의 ID 추출
4. 연결 정보에 명시

**프롬프트 규칙**:
```
관련 문서를 참조할 때:
1. docs/ideation/ 폴더를 스캔한다
2. 제목이나 내용으로 관련 문서를 찾는다
3. 찾은 문서의 ID를 추출한다 (파일명 또는 메타데이터에서)
4. 연결 정보에 명시한다
5. 추측하지 말고 반드시 문서를 읽어서 확인한다
```

#### 5.2 ID 추출 규칙

**ID 형식**:
- ideation: `ideation-{category}-{title-slug}`
- epic: `EPIC-{번호}`
- task: `TASK-{번호}`

**프롬프트 규칙**:
```
문서 ID를 추출할 때:
1. 메타데이터에서 ID를 찾는다
2. 없으면 파일명에서 추출한다
3. 없으면 생성한다 (규칙에 따라)
4. 일관된 형식을 사용한다
```

---

## 규칙 적용 예시

### 예시 1: 새 ideation 문서 작성

**사용자 요청**:
```
"ObjectInteractionHandlerBase 리팩토링해주세요"
```

**에이전트가 해야 할 일** (규칙 1 준수):
```markdown
# ObjectInteractionHandlerBase 리팩토링

**상태**: ideation
**카테고리**: object-interaction
**우선순위**: high
**생성일**: 2026-01-01
**최종 수정**: 2026-01-01

**관련 Epic**: null
**관련 Ideation**: null
**상위 Task**: null

## 설명
ObjectInteractionHandlerBase 클래스를 모듈화하고 개선합니다.

## 구현 상태
- [ ] 구현 전

## 관련 문서
- 없음
```

---

### 예시 2: Epic 생성 및 연결

**사용자 요청**:
```
"이 ideation을 Epic으로 만들어주세요"
```

**에이전트가 해야 할 일** (규칙 2.1, 3.1 준수):

1. Epic 문서 생성:
```markdown
# ObjectInteractionHandlerBase 리팩토링

**상태**: epic
**카테고리**: object-interaction
**우선순위**: high
**생성일**: 2026-01-01
**최종 수정**: 2026-01-01

**관련 Epic**: EPIC-001
**관련 Ideation**: ideation-object-interaction-handler-refactoring
**상위 Task**: null
```

2. **원본 ideation 문서 업데이트** (규칙 2.1):
```markdown
# ObjectInteractionHandlerBase 리팩토링

**상태**: epic  <!-- 변경 -->
**카테고리**: object-interaction
**우선순위**: high
**생성일**: 2026-01-01
**최종 수정**: 2026-01-01  <!-- 업데이트 -->

**관련 Epic**: EPIC-001  <!-- 추가 -->
**관련 Ideation**: null
**상위 Task**: null
```

---

### 예시 3: 기존 문서 마이그레이션

**기존 문서**:
```markdown
# ActionHandler 모듈화 제안

**작성일**: 2025-12-28  
**최신화 날짜**: 2025-12-28  
**목적**: ActionHandler의 모든 액션 유형을 체계적으로 분리하는 방안 제안
```

**에이전트가 해야 할 일** (규칙 4.1 준수):
```markdown
# ActionHandler 모듈화 제안

**상태**: done  <!-- 내용 분석: "모듈화 완료" 확인 -->
**카테고리**: action-handler  <!-- 폴더 구조에서 추론 -->
**우선순위**: high  <!-- 내용 분석 -->
**생성일**: 2025-12-28
**최종 수정**: 2025-12-28

**관련 Epic**: null
**관련 Ideation**: null
**상위 Task**: null

## 설명
ActionHandler의 모든 액션 유형을 체계적으로 분리하는 방안 제안

## 구현 상태
- [x] 구현 완료  <!-- 코드베이스 확인 후 -->

## 관련 문서
- 없음
```

---

## 검증 방법

### 자동 검증 규칙

**에이전트가 문서를 저장하기 전에 반드시 확인:**

1. **메타데이터 존재 확인**:
   ```
   문서에 다음이 모두 있는가?
   - **상태**: 
   - **카테고리**: 
   - **우선순위**: 
   - **생성일**: 
   - **최종 수정**: 
   ```

2. **연결 정보 일관성 확인**:
   ```
   Epic 문서에 ideation_id가 있으면:
   - 해당 ideation 문서에도 epic_id가 있는가?
   - 양방향 연결이 되어 있는가?
   ```

3. **상태 전환 확인**:
   ```
   상태를 변경했으면:
   - 원본 문서도 업데이트했는가?
   - 최종 수정일을 업데이트했는가?
   ```

### 프롬프트에 포함할 검증 단계

```
문서를 저장하기 전에:
1. 메타데이터 섹션이 완전한지 확인한다
2. 연결 정보가 양방향인지 확인한다
3. 상태 전환 시 원본 문서도 업데이트했는지 확인한다
4. 모든 확인이 완료되면 저장한다
```

---

## 핵심 원칙

### 1. 규칙 준수 강제

- ✅ **반드시** 메타데이터 포함
- ✅ **반드시** 양방향 연결
- ✅ **반드시** 상태 전환 시 원본 업데이트
- ❌ 규칙 위반 시 문서 저장 금지

### 2. 자동화 달성

- 규칙만 준수하면 자동으로:
  - 문서 간 연결 설정
  - 상태 추적 가능
  - 대시보드에서 조회 가능

### 3. 기존 문서 호환

- 기존 문서도 규칙 적용 가능
- 마이그레이션 규칙으로 처리

---

## 결론

**기술적 시스템 없이도 프롬프트 규칙만으로 해결 가능:**

1. ✅ 문서 작성 규칙 → 일관된 메타데이터
2. ✅ 상태 전환 규칙 → 자동 업데이트
3. ✅ 연결 규칙 → 양방향 연결
4. ✅ 마이그레이션 규칙 → 기존 문서 처리

**핵심**: 에이전트가 규칙을 **반드시 준수**하도록 프롬프트에 명시

