# World Editor 프론트엔드 QA 이슈 문서

**작성일**: 2024-12-19  
**버전**: 1.0.0  
**상태**: 미완성 기능 정리

## 개요

이 문서는 World Editor 프론트엔드의 미완성 상태, 임시 구현, API 연결 누락, 문구 불일치 등의 이슈를 정리한 QA 문서입니다.

---

## 1. 완전 미구현 기능 (TODO 주석만 존재)

### 1.1 파일 메뉴

| 기능 | 위치 | 상태 | 우선순위 |
|------|------|------|----------|
| 새 프로젝트 생성 | `App.tsx:96` | `console.log`만 존재 | 높음 |
| 프로젝트 열기 | `App.tsx:101` | `console.log`만 존재 | 높음 |
| 프로젝트 저장 | `App.tsx:108` | 임시 구현 (500ms 지연만) | 높음 |
| 다른 이름으로 저장 | `App.tsx:119` | `console.log`만 존재 | 높음 |

**영향**: 프로젝트 관리 기능이 전혀 작동하지 않음

---

### 1.2 편집 메뉴

| 기능 | 위치 | 상태 | 우선순위 |
|------|------|------|----------|
| 잘라내기 | `App.tsx:125` | `console.log`만 존재 | 중간 |
| 복사 | `App.tsx:129` | `console.log`만 존재 | 중간 |
| 붙여넣기 | `App.tsx:133` | `console.log`만 존재 | 중간 |
| 복제 | `App.tsx:137` | `console.log`만 존재 | 중간 |
| 엔티티 삭제 | `App.tsx:147` | `console.log`만 존재 | 높음 |
| 전체 선택 | `App.tsx:153` | `console.log`만 존재 | 낮음 |

**영향**: 클립보드 작업 및 다중 선택 기능 부재

---

### 1.3 검색 메뉴

| 기능 | 위치 | 상태 | 우선순위 |
|------|------|------|----------|
| 찾기 | `App.tsx:163` | `console.log`만 존재 | 중간 |
| 파일에서 찾기 | `App.tsx:167` | `console.log`만 존재 | 중간 |
| 바꾸기 | `App.tsx:171` | `console.log`만 존재 | 낮음 |

**영향**: 검색 기능이 작동하지 않음 (API는 존재하지만 UI 연결 안됨)

---

### 1.4 보기 메뉴

| 기능 | 위치 | 상태 | 우선순위 |
|------|------|------|----------|
| 탐색기 패널 토글 | `App.tsx:178` | `console.log`만 존재 | 낮음 |
| 속성 패널 토글 | `App.tsx:182` | `console.log`만 존재 | 낮음 |
| 콘솔 패널 토글 | `App.tsx:186` | `console.log`만 존재 | 낮음 |
| 맞춤 (Zoom to Fit) | `App.tsx:202` | `console.log`만 존재 | 낮음 |
| 선택 영역으로 줌 | `App.tsx:205` | `console.log`만 존재 | 낮음 |

**영향**: UI 패널 제어 및 줌 기능 제한

---

### 1.5 계층적 맵 뷰

| 기능 | 위치 | 상태 | 우선순위 |
|------|------|------|----------|
| 부모 Region ID 찾기 | `HierarchicalMapView.tsx:347` | TODO 주석만 존재 | 중간 |
| 부모 Location ID 찾기 | `HierarchicalMapView.tsx:350` | TODO 주석만 존재 | 중간 |

**영향**: "상위로" 버튼이 제대로 작동하지 않음 (null로 이동)

---

### 1.6 Cell Entity Manager

| 기능 | 위치 | 상태 | 우선순위 |
|------|------|------|----------|
| Entity 크기 업데이트 | `CellEntityManager.tsx:406` | `console.log`만 존재 | 중간 |

**영향**: Entity 크기 변경이 저장되지 않음

---

## 2. 임시 구현 (alert/prompt/confirm만 사용)

### 2.1 파일 가져오기/내보내기

| 기능 | 위치 | 메시지 | 우선순위 |
|------|------|--------|----------|
| 지도 이미지 가져오기 | `App.tsx:562` | "지도 이미지 가져오기 기능은 추후 구현 예정입니다." | 높음 |
| 엔티티 가져오기 | `App.tsx:571` | "엔티티 가져오기 기능은 추후 구현 예정입니다." | 중간 |
| 지역 가져오기 | `App.tsx:577` | "지역 가져오기 기능은 추후 구현 예정입니다." | 중간 |
| 지도 이미지 내보내기 | `App.tsx:596` | "지도 이미지 내보내기 기능은 추후 구현 예정입니다." | 높음 |

**문제점**: 
- 파일 선택 다이얼로그 없음
- 실제 파일 업로드/다운로드 로직 없음
- API 엔드포인트 확인 필요

---

### 2.2 편집 작업

| 기능 | 위치 | 메시지 | 우선순위 |
|------|------|--------|----------|
| 엔티티 잘라내기 | `App.tsx:695` | "엔티티 잘라내기는 추후 구현 예정입니다." | 중간 |
| 엔티티 복사 | `App.tsx:708` | "엔티티 복사는 추후 구현 예정입니다." | 중간 |
| 엔티티 복제 | `App.tsx:752` | "엔티티 복제는 추후 구현 예정입니다." | 중간 |

**문제점**: 
- 클립보드 API 미사용
- 다중 선택 기능 없음

---

### 2.3 검색 기능

| 기능 | 위치 | 구현 방식 | 우선순위 |
|------|------|-----------|----------|
| 찾기 | `App.tsx:781` | `prompt`로 키워드 입력, `alert`로 결과 표시 | 중간 |
| 파일에서 찾기 | `App.tsx:793` | `prompt`로 키워드 입력, `alert`로 결과 표시 | 중간 |
| 바꾸기 | `App.tsx:805` | "바꾸기 기능은 추후 구현 예정입니다." | 낮음 |

**문제점**: 
- 검색 결과를 UI에 표시하지 않음
- 검색 결과 하이라이트 없음
- 검색 API는 존재 (`searchApi.search`)

---

### 2.4 엔티티 생성

| 기능 | 위치 | 구현 방식 | 우선순위 |
|------|------|-----------|----------|
| 지역 생성 | `App.tsx:856` | `prompt`로 이름만 입력 | 중간 |
| 위치 생성 | `App.tsx:873` | `prompt`로 이름과 Region ID 입력 | 중간 |
| 셀 생성 | `App.tsx:892` | `prompt`로 이름과 Location ID 입력 | 중간 |
| 인물 생성 | `App.tsx:910` | `prompt`로 이름과 Cell ID 입력 | 중간 |
| 기타 엔티티 | `App.tsx:929` | "생성 기능은 추후 구현 예정입니다." | 중간 |

**문제점**: 
- 필수 필드 검증 없음
- ID 입력을 사용자에게 요구 (자동 생성되어야 함)
- 상세 정보 입력 불가

---

### 2.5 검증 및 관리

| 기능 | 위치 | 메시지 | 우선순위 |
|------|------|--------|----------|
| 전체 엔티티 검증 | `App.tsx:959` | "전체 엔티티 검증 기능은 추후 구현 예정입니다." | 낮음 |
| 고아 엔티티 검색 | `App.tsx:962` | "고아 엔티티 검색 기능은 추후 구현 예정입니다." | 낮음 |
| 중복 검색 | `App.tsx:965` | "중복 검색 기능은 추후 구현 예정입니다." | 낮음 |
| 일괄 작업 | `App.tsx:950` | "일괄 작업 기능은 추후 구현 예정입니다." | 낮음 |

**문제점**: 
- 데이터 무결성 검사 기능 부재
- 대량 작업 기능 없음

---

## 3. API는 있지만 제대로 연결 안됨

### 3.1 검색 API

| API | 위치 | 상태 | 문제점 |
|-----|------|------|--------|
| `searchApi.search` | `api.ts:141` | 구현됨 | `App.tsx:781, 793`에서 사용하지만 결과를 `alert`로만 표시 |

**권장 수정**:
- 검색 결과를 사이드 패널에 표시
- 검색 결과 하이라이트
- 검색 결과에서 항목 클릭 시 해당 위치로 이동

---

### 3.2 관계 API

| API | 위치 | 상태 | 문제점 |
|-----|------|------|--------|
| `relationshipsApi.getRelationships` | `api.ts:153` | 구현됨 | `App.tsx:941`에서 `alert`로만 표시 |

**권장 수정**:
- 관계 정보를 모달이나 사이드 패널에 표시
- 관계 그래프 시각화
- 관계 편집 기능

---

### 3.3 Entity 크기 업데이트 API

| API | 위치 | 상태 | 문제점 |
|-----|------|------|--------|
| `entitiesApi.update` | `api.ts:84` | 구현됨 | `CellEntityManager.tsx:406`에서 사용 안함 |

**권장 수정**:
```typescript
// CellEntityManager.tsx:406
onChange={(e) => {
  const newSize = e.target.value;
  entitiesApi.update(entity.entity_id, { entity_size: newSize })
    .then(() => {
      // 로컬 상태 업데이트
      setEntities(prev => prev.map(e => 
        e.entity_id === entity.entity_id 
          ? { ...e, entity_size: newSize }
          : e
      ));
    })
    .catch(error => {
      console.error('Entity 크기 업데이트 실패:', error);
      alert('크기 업데이트에 실패했습니다.');
    });
}}
```

---

## 4. 문구 불일치

### 4.1 메뉴 라벨 vs 실제 기능

| 메뉴 항목 | 위치 | 실제 동작 | 문제점 |
|----------|------|-----------|--------|
| "프로젝트 저장" | `App.tsx:104` | 500ms 지연 후 "저장 완료" 표시 | 실제로 저장하지 않음 |
| "다른 이름으로 저장" | `App.tsx:118` | `console.log`만 실행 | 기능 없음 |

---

### 4.2 에러 메시지

| 위치 | 메시지 | 문제점 |
|------|--------|--------|
| `App.tsx:495` | "핀 추가에 실패했습니다" | 구체적인 에러 원인 미표시 |
| `App.tsx:1056` | "핀 삭제에 실패했습니다" | 구체적인 에러 원인 미표시 |

**권장 수정**: 에러 메시지에 구체적인 원인 표시

---

## 5. 에러 처리 부족

### 5.1 try-catch 없음

| 위치 | 기능 | 문제점 |
|------|------|--------|
| `App.tsx:781-788` | 검색 기능 | 에러 처리는 있지만 사용자에게 명확한 피드백 없음 |
| `App.tsx:793-800` | 파일에서 검색 | 에러 처리는 있지만 사용자에게 명확한 피드백 없음 |

---

### 5.2 로딩 상태 없음

| 위치 | 기능 | 문제점 |
|------|------|--------|
| `App.tsx:856-869` | 지역 생성 | 로딩 인디케이터 없음 |
| `App.tsx:873-887` | 위치 생성 | 로딩 인디케이터 없음 |
| `App.tsx:892-905` | 셀 생성 | 로딩 인디케이터 없음 |
| `App.tsx:910-924` | 인물 생성 | 로딩 인디케이터 없음 |

---

## 6. 사용자 경험 문제

### 6.1 확인 다이얼로그 과다 사용

| 위치 | 기능 | 문제점 |
|------|------|--------|
| `App.tsx:95` | 새 프로젝트 | `confirm` 사용 (모던 UI 대신) |
| `App.tsx:142, 146` | 삭제 확인 | `confirm` 사용 (모던 UI 대신) |
| `App.tsx:757, 761` | 삭제 확인 | `confirm` 사용 (모던 UI 대신) |

**권장 수정**: 커스텀 모달 컴포넌트 사용

---

### 6.2 입력 방식 문제

| 위치 | 기능 | 문제점 |
|------|------|--------|
| `App.tsx:856-924` | 엔티티 생성 | `prompt` 사용 (모던 UI 대신) |
| `App.tsx:781, 793` | 검색 | `prompt` 사용 (모던 UI 대신) |

**권장 수정**: 
- 엔티티 생성: 전용 모달 컴포넌트
- 검색: 검색 바 UI 컴포넌트

---

### 6.3 피드백 부족

| 위치 | 기능 | 문제점 |
|------|------|--------|
| `App.tsx:125-139` | 잘라내기/복사/붙여넣기/복제 | `console.log`만 실행, 사용자 피드백 없음 |
| `App.tsx:163-173` | 검색 메뉴 | `console.log`만 실행, 사용자 피드백 없음 |

---

## 7. 우선순위별 수정 계획

### 높음 (즉시 수정 필요)

1. **프로젝트 관리 기능** (새 프로젝트, 열기, 저장, 다른 이름으로 저장)
2. **엔티티 삭제 기능** (API 연결)
3. **파일 가져오기/내보내기** (지도 이미지)
4. **Entity 크기 업데이트** (API 연결)

---

### 중간 (단기 수정 필요)

1. **클립보드 작업** (잘라내기, 복사, 붙여넣기, 복제)
2. **검색 기능 UI 개선** (결과 표시, 하이라이트)
3. **엔티티 생성 UI 개선** (모달 컴포넌트)
4. **부모 엔티티 ID 찾기** (계층적 맵 뷰)
5. **관계 정보 표시** (모달/패널)

---

### 낮음 (장기 개선)

1. **패널 토글 기능**
2. **줌 기능** (맞춤, 선택 영역으로 줌)
3. **검증 및 관리 기능** (전체 검증, 고아 검색, 중복 검색)
4. **일괄 작업 기능**

---

## 8. 테스트 시나리오

### 8.1 미구현 기능 테스트

1. **프로젝트 관리**
   - 새 프로젝트 생성 시도 → `console.log`만 출력 확인
   - 프로젝트 열기 시도 → `console.log`만 출력 확인
   - 프로젝트 저장 시도 → 임시 지연만 발생 확인

2. **편집 기능**
   - 잘라내기/복사/붙여넣기 시도 → `console.log`만 출력 확인
   - 엔티티 삭제 시도 → `console.log`만 출력 확인

3. **검색 기능**
   - 찾기 시도 → `prompt`와 `alert`만 표시 확인
   - 검색 결과가 UI에 표시되지 않음 확인

---

### 8.2 임시 구현 테스트

1. **파일 가져오기/내보내기**
   - 지도 이미지 가져오기 → `alert` 메시지 확인
   - 엔티티 가져오기 → `alert` 메시지 확인
   - 지도 이미지 내보내기 → `alert` 메시지 확인

2. **엔티티 생성**
   - 지역/위치/셀/인물 생성 → `prompt`로만 입력 받음 확인
   - 필수 필드 검증 없음 확인

---

## 9. 권장 수정 사항 요약

### 9.1 즉시 수정

- [ ] 프로젝트 저장 기능 실제 구현
- [ ] 엔티티 삭제 API 연결
- [ ] Entity 크기 업데이트 API 연결
- [ ] 부모 엔티티 ID 찾기 로직 구현

### 9.2 UI 개선

- [ ] `alert`, `prompt`, `confirm` → 커스텀 모달 컴포넌트로 교체
- [ ] 검색 결과 UI 컴포넌트 구현
- [ ] 엔티티 생성 모달 컴포넌트 구현
- [ ] 로딩 인디케이터 추가

### 9.3 에러 처리 개선

- [ ] 구체적인 에러 메시지 표시
- [ ] 모든 API 호출에 에러 처리 추가
- [ ] 사용자 친화적인 에러 피드백

---

## 10. 참고 파일 목록

### 주요 파일

- `app/world_editor/frontend/src/App.tsx` - 메인 앱 컴포넌트 (대부분의 미구현 기능)
- `app/world_editor/frontend/src/components/HierarchicalMapView.tsx` - 계층적 맵 뷰
- `app/world_editor/frontend/src/components/CellEntityManager.tsx` - Cell 엔티티 관리
- `app/world_editor/frontend/src/services/api.ts` - API 서비스 정의

### 관련 컴포넌트

- `app/world_editor/frontend/src/components/EntityPlacementModal.tsx` - 엔티티 배치 모달 (구현됨)
- `app/world_editor/frontend/src/components/MenuBar.tsx` - 메뉴바 (UI만 존재)

---

**문서 종료**

