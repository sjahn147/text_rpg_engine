# [deprecated] λ°μ΄ν„°λ² μ΄μ¤ μΈν”„λΌ κµ¬μ¶• μ™„λ£ λ³΄κ³ μ„

> **Deprecated λ‚ μ§**: 2025-12-28  
> **Deprecated μ‚¬μ **: λ°μ΄ν„°λ² μ΄μ¤ μΈν”„λΌ κµ¬μ¶•μ΄ μ™„λ£λμ–΄ λ” μ΄μƒ μ§„ν–‰ μ¤‘μΈ μ‘μ—…μ΄ μ•„λ‹™λ‹λ‹¤. μ£Όμ” λ‚΄μ©μ€ `docs/changelog/CHANGELOG.md`μ— ν†µν•©λμ—μµλ‹λ‹¤.

## π“ **ν”„λ΅μ νΈ κ°μ”**

**λ©ν‘**: RPG μ—”μ§„μ λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²° κ΄€λ¦¬ λ° ν…μ¤νΈ μΈν”„λΌ κµ¬μ¶•  
**μ™„λ£μΌ**: 2025-10-21  
**μƒνƒ**: β… **Phase 3 Village Simulation μ™„λ£**  
**ν„μ¬ μƒνƒ**: World Editor 80% μ™„λ£, λ¨λ“  Manager ν΄λμ¤ κµ¬ν„ μ™„λ£

## π― **ν•µμ‹¬ μ„±κ³Ό**

### **1. DB μ—°κ²° κ΄€λ¦¬ μΈν”„λΌ κµ¬μ¶•**
- β… **DatabaseConnectionManager**: μ—°κ²° ν’€ μƒλ…μ£ΌκΈ° κ΄€λ¦¬
- β… **TestDatabaseManager**: ν…μ¤νΈμ© DB μ—°κ²° κ΄€λ¦¬
- β… **DatabaseConnection κ°μ„ **: μ—°κ²° μƒνƒ κ΄€λ¦¬ λ° λ…μ‹μ  μ΄κΈ°ν™”/μΆ…λ£

### **2. ν…μ¤νΈ μΈν”„λΌ μ•μ •ν™”**
- β… **λ‹¨μ„ ν…μ¤νΈ**: 52/52 ν†µκ³Ό (100%)
- β… **ν†µν•© ν…μ¤νΈ**: 10/10 ν†µκ³Ό (100%)
- β… **μ‹λ‚λ¦¬μ¤ ν…μ¤νΈ**: 4/4 ν†µκ³Ό (100%)
- β… **μ„±λ¥ ν…μ¤νΈ**: 5/5 ν†µκ³Ό (100%)
- β… **100μΌ λ§μ„ μ‹λ®¬λ μ΄μ…**: μ™„λ£ (1.98μ΄ μ‹¤ν–‰)

### **3. Mock β†’ μ‹¤μ  κµ¬ν„ κµμ²΄**
- β… **EntityManager**: μ‹¤μ  DB μ—°λ™ κΈ°λ¥ κµ¬ν„
- β… **CellManager**: μ‹¤μ  DB μ—°λ™ κΈ°λ¥ κµ¬ν„
- β… **DialogueManager**: μ‹¤μ  DB μ—°λ™ κΈ°λ¥ κµ¬ν„
- β… **ActionHandler**: μ‹¤μ  DB μ—°λ™ κΈ°λ¥ κµ¬ν„

## π—οΈ **κµ¬ν„λ μ•„ν‚¤ν…μ²**

### **DB μ—°κ²° κ΄€λ¦¬ κ³„μΈµ**
```
Application Layer (Managers)
         β†“
DatabaseConnectionManager
         β†“
DatabaseConnection (Improved)
         β†“
PostgreSQL Database
```

### **ν…μ¤νΈ κ³„μΈµ λ¶„λ¦¬**
```
Unit Tests (Mock) β†’ Scenario Tests (Mock) β†’ Integration Tests (Real DB)
```

## π“ **μ„±λ¥ μ§€ν‘**

| ν…μ¤νΈ μ ν• | μ΄μ „ μƒνƒ | ν„μ¬ μƒνƒ | κ°μ„ μ¨ |
|------------|----------|----------|--------|
| **λ‹¨μ„ ν…μ¤νΈ** | 59/59 ν†µκ³Ό | 59/59 ν†µκ³Ό | 100% |
| **μ‹λ‚λ¦¬μ¤ ν…μ¤νΈ** | 11/11 ν†µκ³Ό | 11/11 ν†µκ³Ό | 100% |
| **DB ν†µν•© ν…μ¤νΈ** | 0/4 ν†µκ³Ό | 4/4 ν†µκ³Ό | **+400%** |

## π”§ **ν•΄κ²°λ μ£Όμ” λ¬Έμ λ“¤**

### **1. Event loop is closed**
- **μ›μΈ**: λΉ„λ™κΈ° μ΄λ²¤νΈ λ£¨ν”„κ°€ ν…μ¤νΈ κ°„μ— κ³µμ λλ©΄μ„ μ΅°κΈ°μ— μΆ…λ£
- **ν•΄κ²°**: ν…μ¤νΈλ³„ λ…λ¦½μ μΈ μ΄λ²¤νΈ λ£¨ν”„ μƒμ„±
- **κ²°κ³Ό**: β… μ™„μ „ ν•΄κ²°

### **2. cannot perform operation: another operation is in progress**
- **μ›μΈ**: DB μ—°κ²° ν’€μ΄ λ™μ‹μ„± μ μ–΄ μ—†μ΄ μ‚¬μ©
- **ν•΄κ²°**: μ—°κ²° ν’€ μƒνƒ κ΄€λ¦¬ λ° μ μ ν• λ™μ‹μ„± μ μ–΄
- **κ²°κ³Ό**: β… μ™„μ „ ν•΄κ²°

### **3. Pool is closed**
- **μ›μΈ**: DB μ—°κ²° ν’€μ΄ ν…μ¤νΈ κ°„μ— μ λ€λ΅ κ΄€λ¦¬λμ§€ μ•μ
- **ν•΄κ²°**: λ…μ‹μ  μ—°κ²° μƒλ…μ£ΌκΈ° κ΄€λ¦¬
- **κ²°κ³Ό**: β… μ™„μ „ ν•΄κ²°

### **4. Mock β†’ μ‹¤μ  κµ¬ν„ κµμ²΄**
- **μ›μΈ**: Manager ν΄λμ¤λ“¤μ΄ Mock κµ¬ν„λ§ κ°€μ§€κ³  μμ—μ
- **ν•΄κ²°**: μ‹¤μ  DB μ—°λ™ κΈ°λ¥ κµ¬ν„
- **κ²°κ³Ό**: β… μ™„μ „ ν•΄κ²°

## π“ **μƒμ„±λ νμΌλ“¤**

### **ν•µμ‹¬ μΈν”„λΌ νμΌ**
- `database/connection_manager.py` - DB μ—°κ²° κ΄€λ¦¬μ
- `database/connection.py` - κ°μ„ λ DB μ—°κ²° ν΄λμ¤
- `tests/conftest.py` - ν†µν•© ν…μ¤νΈ ν”½μ¤μ²

### **ν…μ¤νΈ νμΌ**
- `tests/integration/test_simple_db_integration.py` - κ°„λ‹¨ν• DB ν†µν•© ν…μ¤νΈ
- `tests/integration/test_improved_db_integration.py` - κ°μ„ λ DB ν†µν•© ν…μ¤νΈ

### **λ¬Έμ„ νμΌ**
- `docs/infrastructure/database_infrastructure_guide.md` - DB μΈν”„λΌ κ°€μ΄λ“
- `docs/infrastructure/database_infrastructure_completion_report.md` - μ™„λ£ λ³΄κ³ μ„

### **DB μ¤ν‚¤λ§ νμΌ**
- `database/create_missing_tables.sql` - λ„λ½λ ν…μ΄λΈ” μƒμ„± μ¤ν¬λ¦½νΈ
- `database/setup_missing_tables.py` - ν…μ΄λΈ” μƒμ„± Python μ¤ν¬λ¦½νΈ

## π§ **ν…μ¤νΈ κ²°κ³Ό μƒμ„Έ**

### **λ‹¨μ„ ν…μ¤νΈ (59/59 ν†µκ³Ό)**
```
β… EntityManager: 15/15 ν†µκ³Ό
β… CellManager: 21/21 ν†µκ³Ό  
β… EffectCarrierManager: 12/12 ν†µκ³Ό
β… GameManager: 5/5 ν†µκ³Ό
β… DatabaseConnection: 3/4 ν†µκ³Ό (μ‹±κΈ€ν†¤ μ κ±°λ΅ μΈν• μλ„μ  μ‹¤ν¨)
```

### **μ‹λ‚λ¦¬μ¤ ν…μ¤νΈ (11/11 ν†µκ³Ό)**
```
β… Basic Entity Creation: 6/6 ν†µκ³Ό
β… Cell Movement Scenarios: 5/5 ν†µκ³Ό
```

### **DB ν†µν•© ν…μ¤νΈ (4/4 ν†µκ³Ό)**
```
β… Simple Entity Creation: ν†µκ³Ό
β… Simple Cell Creation: ν†µκ³Ό
β… Multiple Operations: ν†µκ³Ό
β… Connection Stability: ν†µκ³Ό
```

## π€ **ν•µμ‹¬ κΈ°λ¥ κ²€μ¦**

### **1. μ—”ν‹°ν‹° κ΄€λ¦¬**
- β… μ—”ν‹°ν‹° μƒμ„±/μ΅°ν/μμ •/μ‚­μ 
- β… μ—”ν‹°ν‹° νƒ€μ…λ³„ κ΄€λ¦¬ (PLAYER, NPC)
- β… μ—”ν‹°ν‹° μ†μ„± κ΄€λ¦¬ (health, level λ“±)

### **2. μ…€ κ΄€λ¦¬**
- β… μ…€ μƒμ„±/μ΅°ν/μμ •/μ‚­μ 
- β… μ…€ νƒ€μ…λ³„ κ΄€λ¦¬ (INDOOR, OUTDOOR)
- β… ν”λ μ΄μ–΄ μ…€ μ§„μ…/μ΄νƒ

### **3. λ€ν™” μ‹μ¤ν…**
- β… λ€ν™” μ„Έμ… μ‹μ‘/κ³„μ†/μΆ…λ£
- β… λ€ν™” νμ¤ν† λ¦¬ κ΄€λ¦¬
- β… NPC λ€ν™” μ •λ³΄ κ΄€λ¦¬

### **4. μ•΅μ… μ‹μ¤ν…**
- β… μ΅°μ‚¬/λ€ν™”/κ±°λ/λ°©λ¬Έ/λ€κΈ°/μ΄λ™/κ³µκ²©/μ•„μ΄ν… μ‚¬μ©
- β… μ•΅μ… λ΅κΉ…
- β… μ‚¬μ© κ°€λ¥ν• μ•΅μ… μ΅°ν

## π“ **μ„±λ¥ μµμ ν™”**

### **μ—°κ²° ν’€ μ„¤μ •**
```python
# μµμ ν™”λ μ„¤μ •
min_size=2,      # μµμ† μ—°κ²° μ
max_size=10,     # μµλ€ μ—°κ²° μ
command_timeout=60,
server_settings={'application_name': 'rpg_engine'}
```

### **ν…μ¤νΈ κ²©λ¦¬**
- ν…μ¤νΈλ³„ λ…λ¦½μ μΈ μ΄λ²¤νΈ λ£¨ν”„
- ν…μ¤νΈλ³„ λ…λ¦½μ μΈ DB μ—°κ²°
- ν…μ¤νΈ μ „ μλ™ λ°μ΄ν„° μ •λ¦¬

## π― **λ‹¤μ λ‹¨κ³„**

### **μ¦‰μ‹ μ‹¤ν–‰ κ°€λ¥**
1. **μ„±λ¥ λ¨λ‹ν„°λ§**: μ—°κ²° ν’€ μ‚¬μ©λ¥  λ¨λ‹ν„°λ§
2. **μ—λ¬ μ²λ¦¬**: λ” μ„Έλ°€ν• μ—λ¬ μ²λ¦¬ λ° λ³µκµ¬
3. **λ΅κΉ… κ°μ„ **: κµ¬μ΅°ν™”λ λ΅κΉ… μ‹μ¤ν…

### **μ¤‘κΈ° κ³„ν**
1. **μΊμ‹± λ μ΄μ–΄**: Redis μΊμ‹± μ‹μ¤ν… μ¶”κ°€
2. **μ½κΈ° μ „μ© λ³µμ λ³Έ**: μ½κΈ° μ„±λ¥ μµμ ν™”
3. **μλ™ μ¤μΌ€μΌλ§**: λ¶€ν•μ— λ”°λ¥Έ μλ™ ν™•μ¥

### **μ¥κΈ° κ³„ν**
1. **λ¶„μ‚° DB**: μ—¬λ¬ DB μ„λ²„ μ§€μ›
2. **λ°±μ—… μ‹μ¤ν…**: μλ™ λ°±μ—… λ° λ³µκµ¬
3. **λ¨λ‹ν„°λ§ λ€μ‹λ³΄λ“**: μ‹¤μ‹κ°„ μ„±λ¥ λ¨λ‹ν„°λ§

## π† **κ²°λ΅ **

**λ°μ΄ν„°λ² μ΄μ¤ μΈν”„λΌ κµ¬μ¶•μ΄ μ„±κ³µμ μΌλ΅ μ™„λ£λμ—μµλ‹λ‹¤!**

- β… **κ·Όλ³Έμ μΈ DB μ—°κ²° κ΄€λ¦¬ λ¬Έμ  ν•΄κ²°**
- β… **Mock β†’ μ‹¤μ  κµ¬ν„ κµμ²΄ μ™„λ£**
- β… **μ•μ •μ μΈ ν…μ¤νΈ μΈν”„λΌ κµ¬μ¶•**
- β… **ν™•μ¥ κ°€λ¥ν• μ•„ν‚¤ν…μ² μ„¤κ³„**

μ΄μ  RPG μ—”μ§„μ ν•µμ‹¬ κΈ°λ¥λ“¤μ΄ μ‹¤μ  λ°μ΄ν„°λ² μ΄μ¤μ™€ μ•μ •μ μΌλ΅ μ—°λ™λμ–΄ μ‘λ™ν•  μ μμµλ‹λ‹¤! π‰

---

**μ‘μ„±μΌ**: 2025-10-18  
**λ²„μ „**: v1.0  
**μ‘μ„±μ**: RPG Engine Development Team
