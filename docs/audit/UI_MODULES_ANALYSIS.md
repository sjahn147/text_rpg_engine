# app/ui ëª¨ë“ˆ ë¶„ì„ ë° í•„ìš”ì„± ì§„ë‹¨

**ë¶„ì„ ì¼ì**: 2025-12-28

## ğŸ“‹ ëª¨ë“ˆ ê°œìš”

### 1. `dashboard.py` (622 lines)
**ê¸°ëŠ¥**: MVP ê³„ê¸°íŒ UI
- PyQt5 ê¸°ë°˜ GUI
- ê²Œì„ ì´ˆê¸°í™” ë° ì„¸ì…˜ ê´€ë¦¬
- ì—”í‹°í‹°/ì…€ ê´€ë¦¬ UI
- ëŒ€í™” ì‹œìŠ¤í…œ UI
- ëª…ë ¹ì–´ íŒ¨ë„

**ì‚¬ìš©ì²˜**:
- ë…ë¦½ ì‹¤í–‰í˜• GUI ì• í”Œë¦¬ì¼€ì´ì…˜

**íŠ¹ì§•**:
- `GameManager`, `EntityManager`, `CellManager` ì§ì ‘ ì‚¬ìš©
- ì˜ì¡´ì„± ì£¼ì… ì—†ì´ Manager ì¸ìŠ¤í„´ìŠ¤í™”
- UI ì „ìš© ì½”ë“œ (ê²Œì„ ë¡œì§ê³¼ í˜¼ì¬)

**í•„ìš”ì„±**: âŒ **ë¶ˆí•„ìš”** - UI ì „ìš©, runtime ê²Œì„ ì‹¤í–‰ê³¼ ë¬´ê´€

---

### 2. `main_window.py` (607 lines)
**ê¸°ëŠ¥**: RPG Engine GUI ë©”ì¸ ìœˆë„ìš°
- PyQt5 ê¸°ë°˜ GUI
- ì‹œë‚˜ë¦¬ì˜¤ ë¡œë“œ/ì‹¤í–‰ UI
- ë§µ í™”ë©´, ëŒ€í™” í™”ë©´
- ì‹œë‚˜ë¦¬ì˜¤ ì œì–´ íŒ¨ë„

**ì‚¬ìš©ì²˜**:
- ë…ë¦½ ì‹¤í–‰í˜• GUI ì• í”Œë¦¬ì¼€ì´ì…˜

**íŠ¹ì§•**:
- `GameManager`, `ScenarioExecutor`, `ScenarioLoader` ì‚¬ìš©
- ì‹œë‚˜ë¦¬ì˜¤ ì‹¤í–‰ ê¸°ëŠ¥
- UI ì „ìš© ì½”ë“œ

**í•„ìš”ì„±**: âŒ **ë¶ˆí•„ìš”** - UI ì „ìš©, runtime ê²Œì„ ì‹¤í–‰ê³¼ ë¬´ê´€

---

### 3. `screens/` ë””ë ‰í† ë¦¬
**ê¸°ëŠ¥**: UI í™”ë©´ ì»´í¬ë„ŒíŠ¸
- ë§µ í™”ë©´, ëŒ€í™” í™”ë©´ ë“±

**í•„ìš”ì„±**: âŒ **ë¶ˆí•„ìš”** - UI ì „ìš©

---

### 4. `components/` ë””ë ‰í† ë¦¬
**ê¸°ëŠ¥**: UI ì»´í¬ë„ŒíŠ¸
- ì¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ìœ„ì ¯

**í•„ìš”ì„±**: âŒ **ë¶ˆí•„ìš”** - UI ì „ìš©

---

## ğŸ” Runtime ê²Œì„ ì‹¤í–‰ ê´€ì  ë¶„ì„

### í˜„ì¬ UI ëª¨ë“ˆì˜ ì—­í• 
1. **GUI ì œê³µ**: PyQt5 ê¸°ë°˜ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤
2. **ê²Œì„ ì´ˆê¸°í™”**: `GameManager`ë¥¼ í†µí•œ ê²Œì„ ì‹œì‘
3. **ì‹œë‚˜ë¦¬ì˜¤ ì‹¤í–‰**: `ScenarioExecutor`ë¥¼ í†µí•œ ì‹œë‚˜ë¦¬ì˜¤ ì‹¤í–‰
4. **ìƒíƒœ í‘œì‹œ**: ê²Œì„ ìƒíƒœë¥¼ UIì— í‘œì‹œ

### Runtime ê²Œì„ ì‹¤í–‰ì— í•„ìš”í•œ ê²ƒ
1. **ê²Œì„ ì„¸ì…˜ ê´€ë¦¬**: ì„¸ì…˜ ìƒì„±/ì´ˆê¸°í™”/ì¢…ë£Œ
2. **ê²Œì„ ë£¨í”„**: ê²Œì„ ìƒíƒœ ì—…ë°ì´íŠ¸ ë° ë Œë”ë§
3. **ì´ë²¤íŠ¸ ì²˜ë¦¬**: í”Œë ˆì´ì–´ ì…ë ¥, NPC í–‰ë™ ë“±
4. **ìƒíƒœ ì €ì¥/ë¡œë“œ**: ê²Œì„ ì§„í–‰ ìƒí™© ì €ì¥

### UI ëª¨ë“ˆì´ ì œê³µí•˜ëŠ” ê²ƒ vs í•„ìš”í•œ ê²ƒ

| ê¸°ëŠ¥ | UI ëª¨ë“ˆ ì œê³µ | Runtime ê²Œì„ ì‹¤í–‰ í•„ìš” | ì¼ì¹˜ ì—¬ë¶€ |
|------|-------------|---------------------|----------|
| ê²Œì„ ì„¸ì…˜ ê´€ë¦¬ | âœ… (GameManager ì‚¬ìš©) | âœ… | âœ… ì¼ì¹˜ |
| ê²Œì„ ë£¨í”„ | âŒ (UI ì´ë²¤íŠ¸ ë£¨í”„ë§Œ) | âœ… | âŒ ë¶ˆì¼ì¹˜ |
| ì´ë²¤íŠ¸ ì²˜ë¦¬ | âœ… (UI ì´ë²¤íŠ¸ë§Œ) | âœ… (ê²Œì„ ì´ë²¤íŠ¸) | âš ï¸ ë¶€ë¶„ ì¼ì¹˜ |
| ìƒíƒœ ì €ì¥/ë¡œë“œ | âœ… (GameManager ì‚¬ìš©) | âœ… | âœ… ì¼ì¹˜ |
| ë Œë”ë§ | âœ… (PyQt ìœ„ì ¯) | âœ… (ê²Œì„ ë Œë”ë§) | âš ï¸ ë¶€ë¶„ ì¼ì¹˜ |

---

## ğŸ’¡ ì¤‘ì•™ ì§‘ì¤‘ì‹ ëª¨ë“ˆ í•„ìš”ì„± ë¶„ì„

### í˜„ì¬ êµ¬ì¡°
```
app/ui/
â”œâ”€â”€ dashboard.py      # UI ì „ìš©
â”œâ”€â”€ main_window.py    # UI ì „ìš©
â”œâ”€â”€ screens/          # UI ì „ìš©
â””â”€â”€ components/        # UI ì „ìš©
```

### Runtime ê²Œì„ ì‹¤í–‰ì— í•„ìš”í•œ êµ¬ì¡°

#### ì˜µì…˜ 1: ì¤‘ì•™ ì§‘ì¤‘ì‹ Game Engine ëª¨ë“ˆ
```
app/engine/
â”œâ”€â”€ game_engine.py      # ê²Œì„ ì—”ì§„ (ê²Œì„ ë£¨í”„, ìƒíƒœ ê´€ë¦¬)
â”œâ”€â”€ session_manager.py  # ì„¸ì…˜ ê´€ë¦¬
â”œâ”€â”€ event_handler.py    # ì´ë²¤íŠ¸ ì²˜ë¦¬
â””â”€â”€ renderer.py         # ë Œë”ë§ (UI ë…ë¦½ì )
```

**ì¥ì **:
- ê²Œì„ ë¡œì§ê³¼ UI ë¶„ë¦¬
- ë‹¤ì–‘í•œ UI (CLI, Web, GUI) ì§€ì› ê°€ëŠ¥
- í…ŒìŠ¤íŠ¸ ìš©ì´

**ë‹¨ì **:
- ì¶”ê°€ ì¶”ìƒí™” ë ˆì´ì–´ í•„ìš”
- ì´ˆê¸° êµ¬í˜„ ë¹„ìš©

#### ì˜µì…˜ 2: Manager í´ë˜ìŠ¤ ì§ì ‘ ì‚¬ìš©
```
app/managers/          # ì´ë¯¸ ì¡´ì¬
â”œâ”€â”€ entity_manager.py
â”œâ”€â”€ cell_manager.py
â”œâ”€â”€ dialogue_manager.py
â””â”€â”€ ...

# Runtime ê²Œì„ ì‹¤í–‰ì€ Manager ì§ì ‘ ì‚¬ìš©
```

**ì¥ì **:
- ì´ë¯¸ êµ¬í˜„ë¨
- ì˜ì¡´ì„± ì£¼ì… êµ¬ì¡°
- ë‹¨ìˆœí•¨

**ë‹¨ì **:
- ê²Œì„ ë£¨í”„ ë¡œì§ì´ ë¶„ì‚°ë¨
- ìƒíƒœ ê´€ë¦¬ ë³µì¡

#### ì˜µì…˜ 3: í•˜ì´ë¸Œë¦¬ë“œ (ê¶Œì¥)
```
app/engine/
â”œâ”€â”€ game_engine.py      # ê²Œì„ ë£¨í”„ ë° ìƒíƒœ ê´€ë¦¬
â””â”€â”€ session_controller.py  # ì„¸ì…˜ ìƒëª…ì£¼ê¸° ê´€ë¦¬

# Manager í´ë˜ìŠ¤ëŠ” ê·¸ëŒ€ë¡œ ì‚¬ìš©
app/managers/          # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
```

**ì¥ì **:
- ê¸°ì¡´ Manager ì¬ì‚¬ìš©
- ê²Œì„ ë£¨í”„ë§Œ ì¶”ê°€
- í™•ì¥ ê°€ëŠ¥

---

## ğŸ¯ ê²°ë¡  ë° ê¶Œì¥ ì‚¬í•­

### 1. UI ëª¨ë“ˆ (`app/ui`)
**íŒë‹¨**: âŒ **ë¶ˆí•„ìš”**
- UI ì „ìš© ì½”ë“œ
- Runtime ê²Œì„ ì‹¤í–‰ê³¼ ë¬´ê´€
- ì œê±° ë˜ëŠ” ë³„ë„ í”„ë¡œì íŠ¸ë¡œ ë¶„ë¦¬

### 2. ì¤‘ì•™ ì§‘ì¤‘ì‹ ëª¨ë“ˆ í•„ìš”ì„±
**íŒë‹¨**: âš ï¸ **ë¶€ë¶„ì  í•„ìš”**

**í•„ìš”í•œ ê²ƒ**:
- âœ… **ê²Œì„ ì—”ì§„ ëª¨ë“ˆ** (`app/engine/game_engine.py`)
  - ê²Œì„ ë£¨í”„ ê´€ë¦¬
  - ìƒíƒœ ì—…ë°ì´íŠ¸
  - ì´ë²¤íŠ¸ ì²˜ë¦¬
  
- âœ… **ì„¸ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬** (`app/engine/session_controller.py`)
  - ì„¸ì…˜ ìƒëª…ì£¼ê¸° ê´€ë¦¬
  - Manager í´ë˜ìŠ¤ ì¡°ìœ¨

**ë¶ˆí•„ìš”í•œ ê²ƒ**:
- âŒ **ì¤‘ì•™ ì§‘ì¤‘ì‹ ëª¨ë“  ê¸°ëŠ¥ í†µí•©**
  - Manager í´ë˜ìŠ¤ê°€ ì´ë¯¸ ì—­í•  ë¶„ë¦¬ë¨
  - ê³¼ë„í•œ ì¶”ìƒí™”ëŠ” ì˜¤íˆë ¤ ë³µì¡ë„ ì¦ê°€

### 3. ê¶Œì¥ êµ¬ì¡°

```
app/
â”œâ”€â”€ engine/                    # ìƒˆë¡œ ìƒì„±
â”‚   â”œâ”€â”€ game_engine.py         # ê²Œì„ ë£¨í”„ ë° ìƒíƒœ ê´€ë¦¬
â”‚   â””â”€â”€ session_controller.py  # ì„¸ì…˜ ìƒëª…ì£¼ê¸° ê´€ë¦¬
â”‚
â”œâ”€â”€ managers/                  # ê¸°ì¡´ ìœ ì§€
â”‚   â”œâ”€â”€ entity_manager.py
â”‚   â”œâ”€â”€ cell_manager.py
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ handlers/                  # ê¸°ì¡´ ìœ ì§€
â”‚   â””â”€â”€ action_handler.py
â”‚
â””â”€â”€ ui/                        # ì œê±° ë˜ëŠ” ë³„ë„ í”„ë¡œì íŠ¸
    â””â”€â”€ ...
```

### 4. êµ¬í˜„ ì „ëµ

#### Phase 1: ê²Œì„ ì—”ì§„ ëª¨ë“ˆ ìƒì„±
```python
# app/engine/game_engine.py
class GameEngine:
    """ê²Œì„ ì—”ì§„ - ê²Œì„ ë£¨í”„ ë° ìƒíƒœ ê´€ë¦¬"""
    
    def __init__(self, 
                 entity_manager: EntityManager,
                 cell_manager: CellManager,
                 dialogue_manager: DialogueManager,
                 action_handler: ActionHandler):
        # ì˜ì¡´ì„± ì£¼ì…
        ...
    
    async def start_game(self, session_id: str):
        """ê²Œì„ ì‹œì‘"""
        ...
    
    async def game_loop(self):
        """ê²Œì„ ë£¨í”„"""
        while self.is_running:
            await self.update_game_state()
            await self.process_events()
            await asyncio.sleep(0.016)  # ~60 FPS
    
    async def update_game_state(self):
        """ê²Œì„ ìƒíƒœ ì—…ë°ì´íŠ¸"""
        ...
```

#### Phase 2: ì„¸ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ ìƒì„±
```python
# app/engine/session_controller.py
class SessionController:
    """ì„¸ì…˜ ìƒëª…ì£¼ê¸° ê´€ë¦¬"""
    
    def __init__(self, game_engine: GameEngine):
        self.game_engine = game_engine
        ...
    
    async def create_session(self, player_template_id: str) -> str:
        """ìƒˆ ì„¸ì…˜ ìƒì„±"""
        ...
    
    async def load_session(self, session_id: str):
        """ì„¸ì…˜ ë¡œë“œ"""
        ...
    
    async def save_session(self, session_id: str):
        """ì„¸ì…˜ ì €ì¥"""
        ...
```

#### Phase 3: UI ëª¨ë“ˆ ì œê±°
- `app/ui` í´ë” ì œê±° ë˜ëŠ” ë³„ë„ í”„ë¡œì íŠ¸ë¡œ ë¶„ë¦¬
- UIê°€ í•„ìš”í•œ ê²½ìš° ìƒˆë¡œìš´ UI í”„ë¡œì íŠ¸ì—ì„œ `app/engine` ëª¨ë“ˆ ì‚¬ìš©

---

## ğŸ“Š ë¹„êµ ë¶„ì„

### í˜„ì¬ êµ¬ì¡° (UI ì¤‘ì‹¬)
```
UI â†’ GameManager â†’ Managers â†’ Repositories â†’ Database
```
**ë¬¸ì œì **:
- UIì™€ ê²Œì„ ë¡œì§ ê²°í•©
- ê²Œì„ ë£¨í”„ ì—†ìŒ
- í…ŒìŠ¤íŠ¸ ì–´ë ¤ì›€

### ê¶Œì¥ êµ¬ì¡° (Engine ì¤‘ì‹¬)
```
Engine â†’ Managers â†’ Repositories â†’ Database
  â†‘
  â””â”€â”€ UI (ì„ íƒì )
```
**ì¥ì **:
- ê²Œì„ ë¡œì§ê³¼ UI ë¶„ë¦¬
- ê²Œì„ ë£¨í”„ ëª…í™•
- ë‹¤ì–‘í•œ UI ì§€ì› ê°€ëŠ¥
- í…ŒìŠ¤íŠ¸ ìš©ì´

---

## âœ… ìµœì¢… ê¶Œì¥ ì‚¬í•­

1. **`app/ui` ì œê±°**: UI ì „ìš© ì½”ë“œ, runtime ê²Œì„ ì‹¤í–‰ê³¼ ë¬´ê´€
2. **`app/engine` ìƒì„±**: ê²Œì„ ë£¨í”„ ë° ìƒíƒœ ê´€ë¦¬ ëª¨ë“ˆ
3. **Manager í´ë˜ìŠ¤ ìœ ì§€**: ê¸°ì¡´ Manager í´ë˜ìŠ¤ëŠ” ê·¸ëŒ€ë¡œ ì‚¬ìš©
4. **ì˜ì¡´ì„± ì£¼ì… ìœ ì§€**: Engine ëª¨ë“ˆë„ ì˜ì¡´ì„± ì£¼ì… êµ¬ì¡° ì‚¬ìš©

**êµ¬í˜„ ìš°ì„ ìˆœìœ„**:
1. `app/engine/game_engine.py` - ê²Œì„ ë£¨í”„ êµ¬í˜„
2. `app/engine/session_controller.py` - ì„¸ì…˜ ê´€ë¦¬
3. `app/ui` ì œê±° ë˜ëŠ” ë³„ë„ í”„ë¡œì íŠ¸ë¡œ ë¶„ë¦¬

